<!DOCTYPE html>
<html>
   
<head>
    <title>MuseX Cart</title>
    <link rel="icon" href="shopping-cart.png">
    <style>
        body{
            background-color: black;
            color:  rgb(255,244,114);
            font-size: 18pt;
            margin-right: 20px;
            margin-left: 20px;
        }
        table{
            background-color: rgb(255,244,114);
            color: black;
            padding: 5px;
            text-align: center;   
        }
        td{
            background-color: black;
            color: rgb(255,244,114);
        }
        th{
            background-color: black;
            color: rgb(255,244,114);
        }
        img{
            max-width: 100px;
            max-height: 100px;
        }
        div{
            background-color: rgb(255,244,114);
            color: black;
        }
        p{
            font-size: 12pt;
        }
    </style>
</head>
<body>
    <script src="items.js"></script>    

    <div>
        <h1>MuseX</h1>
        <p>We would have a whole menu section right here where you can navigate through the website, search products, etc. However, this site was made by a college student who has little motivation and has taken only one web programming class.</p>
    </div>
    
    <br>

    <h2>Your <img src="shopping-cart.png" width="35px" height="35px">, Oh Valued Patron:</h2>

    <table id="MyTable">
        <tr>
            <th>Item</th>
            <th>Item Name</th>
            <th>Description</th>
            <th>Manufactuer</th>
            <th>Amount Available</th>
            <th>Amount in Cart</th>
            <th>Price</th>
            <th>Remove From Cart</th>
        </tr>
    </table>

    <div id="Subtotal">
        <h1>Subtotal: <label id="cost"></label></h1>

    </div>

    <script>
    var item1Cost =0;
    var item2Cost = 0;
    var item3Cost = 0;
    var item4Cost = 0;
    var subtotal = 0;

        function populate(){
            var itemCount = 4;
            var currentItem = 1;
            const table = document.getElementById("MyTable");

            //decided to make this function use a loop dynamic variables that way if someone 
            //were to hypothetically come in and add items to the item.js script, all they have to do is change the itemcount variable
            while(currentItem <= itemCount)
            {
                let row = table.insertRow();
                row.id = "item" + currentItem;
                let item = row.insertCell(0);
                item.innerHTML = "<img src= " + window['item' + currentItem].image + "> ";
                let itemName = row.insertCell(1);
                itemName.innerHTML = window['item' + currentItem].productName;
                let description = row.insertCell(2);
                description.innerHTML = window['item' + currentItem].description;
                let manufacturer = row.insertCell(3);
                manufacturer.innerHTML = window['item' + currentItem].manufacturer;
                let amountAvailable = row.insertCell(4);
                amountAvailable.id = "amountAvailableForItem" + currentItem;
                amountAvailable.innerHTML = window['item' + currentItem].available;
                let amountInCart = row.insertCell(5);
                amountInCart.innerHTML = amountInCart.innerHTML = "<input type='number' id='amountOfItem" + currentItem + "' min='0' max='" + window['item' + currentItem].available + "'>";
                let price = row.insertCell(6);
                price.innerHTML = window['item' + currentItem].price;
                let remove = row.insertCell(7);
                remove.innerHTML = "<img src ='Remove.png' width='15px' height='15px' id='removeItem" + currentItem + "'>";

                currentItem++;
            }
        }

        populate();

        //could not figure out how to remove, add items, or subtract items from the cart dynamically to save my life
        //therefore, everything is hard coded

        //these are the four remvoe functions that do the same thing but for the different items
        document.getElementById("removeItem1").onclick = function()
        {
            //gets the parent element of the parent elment (image-->td--->tr) and removes the row
            this.parentElement.parentElement.remove();
        }

        document.getElementById("removeItem2").onclick = function()
        {
            this.parentElement.parentElement.remove();
        }

        document.getElementById("removeItem3").onclick = function()
        {
            this.parentElement.parentElement.remove();
        }

        document.getElementById("removeItem4").onclick = function()
        {
            this.parentElement.parentElement.remove();
        }


        //these functions get the price of each item of the cart based on how many are in it then updates the subtotal
        document.getElementById("amountOfItem1").onclick= function()
        {

            var price = item1.price;

            var Subtotal;

            var amount =parseInt(document.getElementById("amountOfItem1").value);

            var priceToAdd = price * amount;

            item1Cost = priceToAdd;

            updateSubtotal();
        }

        document.getElementById("amountOfItem2").onclick= function()
        {

            var price = item2.price;

            var Subtotal;

            var amount =parseInt(document.getElementById("amountOfItem2").value);

            var priceToAdd = price * amount;

            item2Cost = priceToAdd;

            updateSubtotal();
        }

        document.getElementById("amountOfItem3").onclick= function()
        {

            var price = item3.price;

            var Subtotal;

            var amount =parseInt(document.getElementById("amountOfItem3").value);

            var priceToAdd = price * amount;

            item3Cost = priceToAdd;

            updateSubtotal();
        }

        document.getElementById("amountOfItem4").onclick= function()
        {

            var price = item4.price;

            var Subtotal;

            var amount =parseInt(document.getElementById("amountOfItem4").value);

            var priceToAdd = price * amount;

            item4Cost = priceToAdd;

            updateSubtotal();
        }


        //updates the subtotal based on the individual prices from the items in the cart
        function updateSubtotal()
        {
        subtotal= item1Cost + item2Cost + item3Cost + item4Cost;

        label = document.getElementById("cost");

        label.innerHTML="$" + subtotal.toFixed(2);
        }
</script>
</body>
</html>